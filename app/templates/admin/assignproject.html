{% include "header.html" %}
  <script type="text/javascript" src="/static/customizedjs/session.js"></script>
  <script type="text/javascript">
  $(document).ready(function(){
       $("#Button2").click(function(event){
        event.preventDefault();
        var token = getCookie("Authorization");
        var url = baseUrl+"admin/assignprojectdetails";
           $.ajax({
            headers: {
                      'Authorization':token,
                      },
            url: url,
            type:"POST",
               data: {
              'project':$("#select1").val(),
              'user'   :$("#select2").val(),
               },
              dataType: "json",
              success: function(response){
              console.log(response);
               $('.alert').show();
                    window.setTimeout(function() {
                    $(".alert").fadeTo(500, 0).slideUp(500, function(){
                    $(this).remove(); 
                    });
                    location.reload()
                    }, 2000);
           },
           error: function (err) {
             $("#alertsuccess").hide();
             $("#alertmesg").show();
             $("#alertmesg").html("Something went wrong. Please try again later. ");
             return false;
           }
   
         });
   
       });
   });
   
</script>
 <script type="text/javascript">
  $(document).ready(function(){
          var token = getCookie("Authorization");
          var url = baseUrl+"admin/getassignedproject";
           $.ajax({
            headers: {
                      'Authorization':token,
                      },
            url: url,
            type:"GET",
              dataType: "json",
              success: function(response){
                if(response){
                  var projectlen=response.projectlist.length;
                  var userslen=response.userslist.length;
               for (i = 0; i < projectlen; i++) {
                        var projectid = response.projectlist[i].id;
                        var name = response.projectlist[i].name;
                        $("#select1").append("<option value='" + projectid + "'>" + name + "</option>");
                 };
                for (i = 0; i < userslen; i++) {
                        var userid = response.userslist[i].user;
                        var username = response.userslist[i].first_name + " " +response.userslist[i].last_name;
                        $("#select2").append("<option value='" + userid + "'>" + username + "</option>");
                 };
                }
           },
           error: function (err) {
             return false;
           }
       });
   });
</script>
<body>
  <div class="wrapper">
  <div class="sidebar" data-image="/static/img/sidebar-5.jpg">
    <!--
      Tip 1: You can change the color of the sidebar using: data-color="purple | blue | green | orange | red"
      
      Tip 2: you can also add an image using data-image tag
      -->
    <div class="sidebar-wrapper">
      <div class="logo">
        <a href="http://www.thoughtwin.com" class="simple-text">
        Thoughtwine
        </a>
      </div>
      <ul class="nav">
        <li  class="nav-item active">
          <a class="nav-link" href="/admin/dashboard">
            <i class="fa fa-pie-chart" aria-hidden="true"></i>
            <p>Dashboard</p>
          </a>
        </li>
        <li>
          <a class="nav-link" href="editprofile">
            <i class="fa fa-user fa" aria-hidden="true"></i>
            <p>User Profile</p>
          </a>
        </li>
      </ul>
    </div>
  </div>
  <div class="main-panel">
  <!-- fixed plugin  -->
  <div class="fixed-plugin">
  </div>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg " color-on-scroll="500">
    <div class=" container-fluid  ">
      <a class="navbar-brand" href="dashboard">Admin Dashboard </a>
      <button href="" class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-bar burger-lines"></span>
      <span class="navbar-toggler-bar burger-lines"></span>
      <span class="navbar-toggler-bar burger-lines"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navigation">
        <ul class="nav navbar-nav mr-auto">
          <li class="nav-item">
            <a href="#" class="nav-link" data-toggle="dropdown">
            <span class="d-lg-none">Dashboard</span>
            </a>
          </li>
        </ul>
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" onclick="deleteAllCookies()">
            <span class="no-icon">Log out</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- End Navbar -->
  <div class="alert alert-success" style="position: absolute;top:30px;left: 25%;height: 40px;width: 300px;color: black;border-radius: 10px; text-align: center;display: none;">
    Project Assigned Successfully!
  </div>
  <div class="content">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
        </div>
        <div class="col-md-12">
          <h2>Assign Project To User</h2>
          <br>
          <form method="POST" name="assignprojectdetailsform">
            <div>
              <span>Project Name:</span>
                <select id="select1">
                <option value="0">Select Project</option>
                </select>
              <br>
            </div>
            <div>
              <br><br>
              <span>Select User</span>
              <select id="select2">
                <option value="0">Select User</option>
                </select>
              <br><br><br>
              <button id="Button2" type="Submit">Submit</button>
            </div>
          </form>
          <!-- {{userslist}} -->
          <br><br>
          <!-- {{projectlist}} -->
        </div>
      </div>
    </div>
  </div>

  {% include "footer.html" %}
